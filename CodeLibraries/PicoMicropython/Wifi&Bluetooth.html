<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html dir="ltr" xmlns="http://www.w3.org/1999/xhtml">

	<!-- #BeginTemplate "../master.dwt" -->

	<head>
	
		<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
		<!-- #BeginEditable "doctitle" -->
		<title>Micropython Libraries for Raspbe</title>
		<!-- #EndEditable -->
		<link href="../styles/style1.css" media="screen" rel="stylesheet" title="CSS" type="text/css" />
		<script type="text/javascript" src="../Libraries.js"></script>
		<title>Code Libraries</title>
			
	</head>
	
	<body style="overflow:auto;">
		
		<div id="container"><!-- Begin Container -->
			
			<div id="masthead"><!-- Begin Masthead -->
				<h1 style="font-size:36px;color:black;">Code Libraries for:</h1>
				<h1 style="font-size:36px;color:black;">Micropython on Raspberry Pi Pico &amp; C++ on Arduino</h1>
				<h3 style="color:black">By Gregary Boyles</h3>
			</div><!-- End Masthead -->
			
			<div id="navigation"><!-- Begin Navigation -->
				<ul>
					<li><a href="../index.html">Home</a></li>
					<li><a href="PicoMicropython.html">Pico Micropython</a></li>
					<li><a href="DCMotorControllers.html">&nbsp;&nbsp;DC Motor Controllers</a></li>
					<li><a href="Wifi&Bluetooth.html">&nbsp;&nbsp;Wifi &amp; Bluetooth</a></li>
					<li><a href="../ArduinoC/ArduinoC.html">Arduino C++</a></li>
					<li><a href="../ArduinoC/GeneralPurpose.html">&nbsp;&nbsp;General Purpose</a></li>
					<li><a href="../ArduinoC/SDCardFiles.html">&nbsp;&nbsp;SD Card &amp; File Handling</a></li>
					<li><a href="../ArduinoC/HardwareButtons.html">&nbsp;&nbsp;Hardware Buttons</a></li>
					<li><a href="../ArduinoC/WiFiShieldSerialComms.html">&nbsp;&nbsp;WiFi &amp; Serial Communications</a></li>
					<li><a href="../ArduinoC/TFTLCDScreen.html">&nbsp;&nbsp;TFT LCD</a></li>
					<li><a href="../ArduinoC/LCDScreens.html">&nbsp;&nbsp;LCD Screens</a></li>
					<li><a href="../ArduinoC/ICs.html">&nbsp;&nbsp;ICs</a></li>
					<li><a href="../ArduinoC/Modules.html">&nbsp;&nbsp;Modules</a></li>
					<li><a href="../Contact.html">Contact</a></li>
				</ul>
				
<!--



-->
			</div><!-- End Navigation -->
			
			<div id="content"><!-- Begin Content -->
			
				<!-- #BeginEditable "content" -->
				
				<h2>Microoython Libraries for Rapsberry Pi Pico - Wifi &amp; Bluetooth</h2>
				<h3>UART Serial</h3>
		        <img alt="" src="../images/HC-05.jpg" class="image_wrapper" width="400" />
				<p class="paragraph">This library lets you to set your Pico up to receive serial data through one of the UART ports from any serial device.</p>
				<p class="paragraph">Such as a HC-05 bluetooth module or a wired connection between two Picos.</p>
				<br/>
		        <div class="python">
					from machine import UART, Pin<br/>
					from Common import *<br/><br/>
									
					class CUARTSerial:<br/>
									    								    
					&nbsp;&nbsp;&nbsp;&nbsp;def __init__(self, nBaudRate, nRxPin, nTxPin, nTimeoutMillis = 500):<br/>
					&nbsp;&nbsp;&nbsp;&nbsp;def GetUARTPort(self):<br/>
					&nbsp;&nbsp;&nbsp;&nbsp;def WaitForToken(self):<br/>
					&nbsp;&nbsp;&nbsp;&nbsp;def SendResponse(self, strResponse):<br/>
				</div>

				<br/>
				<h3>Constructor: __init__(self, nBaudRate, nRxPin, nTxPin, nTimeoutMillis = 500)</h3>
				<p class="paragraph">The constructor starts the up the UART channel with the specified baud rate, Tx pin and Rx pin.</p>
				<p class="paragraph">There is no need to specify the UART channel (0 or 1) because the constructor dtermines this from the pins you specify. </p>
				<p class="paragraph">If you specify any pins that are not connected to either UART channel then you will get an error message in the console.</p>
				<h4>Parameters</h4>
				<ul class="paragraph">
					<li><b>nBaudRate:</b><br/>&nbsp;An integer specifying the baud rate you wish to use.</li>
					<li><b>nRxPin:</b><br/>&nbsp;An integer specifying the Rx pin.</li>
					<li><b>nTxPin:</b><br/>&nbsp;An integer specifying the Tx pin.</li>
					<li><b>nTimeoutMillis :</b><br/>&nbsp;An optional integer specifying millseconds time out fo receiving data through WaitForToken(...). The default timeout value is 500 milliseconds.</li>
				</ul>
				<br/>  
				<h3>GetUARTPort()</h3>
				<p class="paragraph">This function simply returns the UART channel number - 0 or 1 . </p>
				<br/>
				<h3>WaitForToken()</h3>
				<p class="paragraph">This function blocks until a token is recieved from the UART channel. </p>
				<p class="paragraph">Tokens should be delineated with '\n' (ASCII 13) or carriage return. </p>
				<p class="paragraph"><b>Returns:</b>&nbsp;A string containing the token sent, without the '\n' at the end.</p>
				<br/>
				<h3>SendResponse(strResponse)</h3>
				<p class="paragraph">This function simply sends back a response to the client at the other end of the UART channel. </p>
				<h4>Parameters</h4>
				<ul class="paragraph">
					<li><b>strResponse:</b><br/>&nbsp;A string containing the text you wish to send to the client.</li>
				</ul>
				<br/>
				<h3>Dependancies</h3>
				<p class="paragraph">Common.py (included in download)</p>
				<br/>
				<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
					<input type="hidden" name="cmd" value="_s-xclick">
					<input type="hidden" name="hosted_button_id" value="GREWTKMTWUH8A">
					<input type="image" src="https://www.paypalobjects.com/en_AU/i/btn/btn_buynowCC_LG.gif" border="0" name="submit" alt="PayPal – The safer, easier way to pay online!">
					<img alt="" border="0" src="https://www.paypalobjects.com/en_AU/i/scr/pixel.gif" width="1" height="1">
				</form>
				<br/>
				<hr/>
	    		<h3>Wifi</h3>
				<img alt="" class="image_wrapper" src="../images/Wifi.png" class="image_wrapper" width="268" />
	        	<br/>
				<p class="paragraph">The library does a nearly all the hard coding work involved with setting up Wifi on your Pico</p>
				<p class="paragraph">You can put your Pico into access point mode or existing network connection mode.</p>
				<p class="paragraph">And you can set it up for receiving HTTP requests or UDP datagrams</p>
				<p class="paragraph">All with very simpile function calls.</p>
				<br/>
            	<div class="python">
					import socket<br/>
					import network<br/>
					import time<br/>
					from Common import *<br/>
					<br/>
					class CWiFi:<br/>
					<br/>
					&nbsp;&nbsp;&nbsp;&nbsp;# Function overloading not allowed in Python so the constructor just sets the millisecond time out value through optional parameter. The default timeout is 500 milliseconds.<br/>
					&nbsp;&nbsp;&nbsp;&nbsp;def __init_(nTimeoutMillis):<br/>
					<br/>
					&nbsp;&nbsp;&nbsp;&nbsp;# Common setup tasks<br/>
					&nbsp;&nbsp;&nbsp;&nbsp;def Begin(self, bIsAccessPoint, strSSID, strPassword):<br/>
					<br/>
					&nbsp;&nbsp;&nbsp;&nbsp;# Setup as WiFi for HTTP<br/>
					&nbsp;&nbsp;&nbsp;&nbsp;def BeginHTTP(self, strSSID, strPassword):<br/>
					<br/>
					&nbsp;&nbsp;&nbsp;&nbsp;# Setup as WiFi access point for HTTP<br/>
					&nbsp;&nbsp;&nbsp;&nbsp;def BeginHTTPAsAP(self, strSSID, strPassword):<br/>
					<br/>
					&nbsp;&nbsp;&nbsp;&nbsp;# Set up as a WiFi for UDP<br/>
					&nbsp;&nbsp;&nbsp;&nbsp;def BeginUDP(self, strSSID, strPassword, nPort):<br/>
					<br/>
					&nbsp;&nbsp;&nbsp;&nbsp;# Set up as a WiFi Access Point<br/>
					&nbsp;&nbsp;&nbsp;&nbsp;def BeginUDPAsAP(self, strSSID, strPassword, nPort):<br/>
					<br/>
					&nbsp;&nbsp;&nbsp;&nbsp;def HexCodes2ASCII(self, strRequest):<br/>
					<br/>
					&nbsp;&nbsp;&nbsp;&nbsp;def WaitForRequest(self):<br/>
					<br/>
					&nbsp;&nbsp;&nbsp;&nbsp;def SendResponse(strResponse, bCloseSocket):<br/>
		            </div>
					<br/>
					<h3>Constructor: __init_(nTimeoutMillis)</h3>
					<p class="paragraph">The constructor just sets the milliseconds time out through an optional parameter. The default time out value is 500 milliseconds. </p>
					<h3>def Begin(self, bIsAccessPoint, strSSID, strPassword)</h3>
					<p class="paragraph">This function is for internal class use only, so dont call it.</p>
					<h3>def BeginHTTP(self, strSSID, strPassword)</h3>
					<p class="paragraph">Call this function if you want your Pico to log into an exisitng Wifi network as a web server that receives HTTP requests.</p>
					<h4>Parameters</h4>
					<ul class="paragraph">
						<li><b>strSSID:</b><br/>&nbsp;A string containing the name of the network.</li>
						<li><b>strPassword:</b><br/>&nbsp;A string containing the password for the network.</li>
					</ul>
					<h3>BeginHTTPAsAP(self, strSSID, strPassword)</h3>
					<p class="paragraph">Call this function if you want your Pico to start an access point as a web server that receives HTTP requests.</p>
					<h4>Parameters</h4>
					<ul class="paragraph">
						<li><b>strSSID:</b><br/>&nbsp;A string containing the name of the network you wish to create.</li>
						<li><b>strPassword:</b><br/>&nbsp;A string containing the password for the network.</li>
					</ul>
					<h3>BeginUDP(self, strSSID, strPassword, nPort)</h3>
					<p class="paragraph">Call this function if you want your Pico to log into an exisitng Wifi network as a UDP server that receives datagrams.</p>
					<h4>Parameters</h4>
					<ul class="paragraph">
						<li><b>strSSID:</b><br/>&nbsp;A string containing the name of the network you wish to create.</li>
						<li><b>strPassword:</b><br/>&nbsp;A string containing the password for the network.</li>
						<li><b>nPort:</b><br/>&nbsp;An integer containing the port number you want the UDP server to listen to. 10,000 ro 11,000 are typical port numbers used for UDP.</li>
					</ul>
					<h3>BeginUDPAsAP(self, strSSID, strPassword, nPort)</h3>
					<p class="paragraph">Call this function if you want your Pico to start an access point as a UDP server that receives datagrams.</p>
					<h4>Parameters</h4>
					<ul class="paragraph">
						<li><b>strSSID:</b><br/>&nbsp;A string containing the name of the network you wish to create.</li>
						<li><b>strPassword:</b><br/>&nbsp;A string containing the password for the network.</li>
						<li><b>nPort:</b><br/>&nbsp;An integer containing the port number you want the UDP server to listen to. 10,000 ro 11,000 are typical port numbers used for UDP.</li>
					</ul>
					<h3>HexCodes2ASCII(self, strRequest)</h3>
					<p class="paragraph">This function is for intenal use only. It is called automatically for incoming HTTP requests. It converts hex codes to the ASCII characters they represent.</p>
					<h3>WaitForToken()</h3>
					<p class="paragraph">&nbsp;This function blocks until a HTTP request or UDP datagram is recieved from the through the Wifi connection. </p>
					<p class="paragraph">&nbsp;UDP datagrams should be delineated with '\n' (ASCII 13) or carriage return. </p>
					<p class="paragraph"><b>Returns:</b>&nbsp;A string containing the HTTP request or UDP datagram.</p>
					<p class="paragraph">HTTP requests are stripped down to this form 'GET \', 'GET \file.html' and 'GET \file.html?name=Fred.</p>
					<p class="paragraph">In the case of datagrams the '\n' is stripped out.</p>
					<h3>SendResponse(strResponse, bCloseSocket)</h3>
					<p class="paragraph">This function simply sends back a response to the client at the other end of the UART channel. </p>
					<h4>Parameters</h4>
					<ul class="paragraph">
						<li><b>strResponse:</b><br/>&nbsp;A string containing the text you wish to send to the client.</li>
						<li><b>bCloseSocket:</b><br/>&nbsp;A boolean specifying whether you want to close the connection after sending your response.</li>
					</ul>
					<br/>
					<h3>Dependancies</h3>
					<p class="paragraph">Common.py (included in download)</p>
					<br/>		
					<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
						<input type="hidden" name="cmd" value="_s-xclick">
						<input type="hidden" name="hosted_button_id" value="95T5ZFMMGGPEW">
						<input type="image" src="https://www.paypalobjects.com/en_AU/i/btn/btn_buynowCC_LG.gif" border="0" name="submit" alt="PayPal – The safer, easier way to pay online!">
						<img alt="" border="0" src="https://www.paypalobjects.com/en_AU/i/scr/pixel.gif" width="1" height="1">
					</form>
					<br/>
					<hr/>

	    		<h3>SerialSource</h3>
				<img alt="" class="image_wrapper" src="../images/SerialComms.jpg" class="image_wrapper" width="268" />
	        	<br/>
				<p class="paragraph">The library combines the Wifi and UART libraries into a single source of serial data.</p>
				<p class="paragraph">You set your Pico up to receive data from only Wifi, Wifi and one UART port or Wifi, both UART ports, just one UART port or just both UART ports.</p>
				<p class="paragraph">This is accomplished by calling one of BeginUDP/BeginHTTP function and/or one of the BeginUART functions.</p>
				<p class="paragraph">The BeginUDP/BeginHTTP functions and the BeginUART functions are independant of each other.</p>
				<p class="paragraph">It makes handling serial data from multiple sources easy.</p>
				<br/>
            	<div class="python">

					from UARTSerial import *<br/>
					from WiFi import *<br/>
					<br/>
					WIFI = "WIFI"<br/>
					UART0 = "UART0"<br/>
					UART1 = "UART1"<br/>
					<br/>
					class CSerialSource:<br/>
    				<br/>
				    &nbsp;&nbsp;&nbsp;&nbsp;# Function overloading not allowed in Python so the constructor just sets the time out for receiving data.<br/>
				    &nbsp;&nbsp;&nbsp;&nbsp;def __init_(nMillisTimeout = 500):<br/>
					<br/>
				    &nbsp;&nbsp;&nbsp;&nbsp;# Set the serial source up as a WiFi Access Point with HTTP<br/>
				    &nbsp;&nbsp;&nbsp;&nbsp;def BeginHTTPAsAP(self, strSSID, strPassword):<br/>
					<br/>
				    &nbsp;&nbsp;&nbsp;&nbsp;# Set the serial source up on an existing WiFi network with HTTP<br/>
				    &nbsp;&nbsp;&nbsp;&nbsp;def BeginHTTP(self, strSSID, strPassword):<br/>
					<br/>
				    &nbsp;&nbsp;&nbsp;&nbsp;# Set the serial source up as a WiFi Access Point with UDP<br/>
				    &nbsp;&nbsp;&nbsp;&nbsp;def BeginUDPAsAP(self, strSSID, strPassword, nPort):<br/>
					<br/>
				    &nbsp;&nbsp;&nbsp;&nbsp;# Set the serial source up on an existing WiFi network with UDP<br/>
				    &nbsp;&nbsp;&nbsp;&nbsp;def BeginUDP(self, strSSID, strPassword, nPort):<br/>
					<br/>
				    &nbsp;&nbsp;&nbsp;&nbsp;# Set the serial source up as one UART port<br/>
				    &nbsp;&nbsp;&nbsp;&nbsp;def BeginUART1(self, nBaudRate, nRxPin, nTxPin):<br/>
				    <br/>  
				    &nbsp;&nbsp;&nbsp;&nbsp;def BeginUART2(self, nBaudRate1, nRxPin1, nTxPin1, nBaudRate2, nRxPin2, nTxPin2):<br/>
					<br/>
				    &nbsp;&nbsp;&nbsp;&nbsp;def WaitForToken(self, nMillis = 500):<br/>
				    <br/>
				    &nbsp;&nbsp;&nbsp;&nbsp;def SendResponse(self, strResponse):<br/>
				    <br/>
				    &nbsp;&nbsp;&nbsp;&nbsp;def SendResponseUART0(self, strResponse):<br/>
				    <br/>      
				    &nbsp;&nbsp;&nbsp;&nbsp;def SendResponseUART1(self, strResponse):<br/>
					<br/>
				    &nbsp;&nbsp;&nbsp;&nbsp;def SendResponseWIFI(self, strResponse, bClose = False):<br/>
            		<br/>
            	</div>
				<br/>
				<h3>Constructor: __init_(nMillisTimeout = 500)</h3>
				<p class="paragraph">The constructor just sets the milliseconds time out value through an optional parameter. The default time out is 500 milliseconds.</p>
				<h3>Begin(self, bIsAccessPoint, strSSID, strPassword)</h3>
				<p class="paragraph">This function is for internal class use only, so dont call it.</p>
				<h3>BeginHTTP(self, strSSID, strPassword)</h3>
				<p class="paragraph">Call this function if you want your Pico to log into an exisitng Wifi network as a web server that receives HTTP requests.</p>
				<h4>Parameters</h4>
				<ul class="paragraph">
					<li><b>strSSID:</b><br/>&nbsp;A string containing the name of the network.</li>
					<li><b>strPassword:</b><br/>&nbsp;A string containing the password for the network.</li>
				</ul>
				<h3>BeginHTTPAsAP(self, strSSID, strPassword)</h3>
				<p class="paragraph">Call this function if you want your Pico to start an access point as a web server that receives HTTP requests.</p>
				<h4>Parameters</h4>
				<ul class="paragraph">
					<li><b>strSSID:</b><br/>&nbsp;A string containing the name of the network you wish to create.</li>
					<li><b>strPassword:</b><br/>&nbsp;A string containing the password for the network.</li>
				</ul>
				<h3>BeginUDP(self, strSSID, strPassword, nPort)</h3>
				<p class="paragraph">Call this function if you want your Pico to log into an exisitng Wifi network as a UDP server that receives datagrams.</p>
				<h4>Parameters</h4>
				<ul class="paragraph">
					<li><b>strSSID:</b><br/>&nbsp;A string containing the name of the network you wish to create.</li>
					<li><b>strPassword:</b><br/>&nbsp;A string containing the password for the network.</li>
					<li><b>nPort:</b><br/>&nbsp;An integer containing the port number you want the UDP server to listen to. 10,000 ro 11,000 are typical port numbers used for UDP.</li>
				</ul>
				<h3>BeginUDPAsAP(self, strSSID, strPassword, nPort)</h3>
				<p class="paragraph">Call this function if you want your Pico to start an access point as a UDP server that receives datagrams.</p>
				<h4>Parameters</h4>
				<ul class="paragraph">
					<li><b>strSSID:</b><br/>&nbsp;A string containing the name of the network you wish to create.</li>
					<li><b>strPassword:</b><br/>&nbsp;A string containing the password for the network.</li>
					<li><b>nPort:</b><br/>&nbsp;An integer containing the port number you want the UDP server to listen to. 10,000 ro 11,000 are typical port numbers used for UDP.</li>
				</ul>
				<h3>BeginUART1(self, nBaudRate, nRxPin, nTxPin)</h3>
				<p class="paragraph">This sets up one UART port to receive data. 
				You don't need to specify the port number as the function 
				determines the port from the Tx and Rx pins you specify. If you 
				specify invalid Tx or Rx pins then you will get an error message 
				in the console.</p>
				<h3>BeginUART2(self, nBaudRate1, nRxPin1, nTxPin1, 
				nBaudRate2, nRxPin2, nTxPin2)</h3>
				<p class="paragraph">This sets up both UART ports to receive 
				data. Again the function determines which UART ports from the 
				pairs of Tx and Rx pins you specify. If you specify invalid Tx 
				or Rx pins then you will get an error message in the console.</p>
				<h3>WaitForToken()</h3>
				<p class="paragraph">This function will check for data on any of 
				the sources that have been configured, subject the the 
				milliseconds time out value. </p>
				<p class="paragraph">&nbsp;UDP datagrams should be delineated with '\n' (ASCII 13) or carriage return. </p>
				<p class="paragraph"><b>Returns:</b>&nbsp;A string containing the HTTP request or UDP datagram 
				or token from the UART ports.</p>
				<p class="paragraph">HTTP requests are stripped down to this form 'GET \', 'GET \file.html' and 'GET \file.html?name=Fred.</p>
				<p class="paragraph">In the case of datagrams the '\n' is stripped out.</p>
				<h3>IsFromWIFI(self)</h3>
				<p class="paragraph">Returns true if the last data received was 
				from Wifi, otherwise false.</p>
				<h3>IsFromUART0(self)</h3>
				<p class="paragraph">Returns true if the last data received was 
				from UART0, otherwise false.</p>
				<h3>IsFromUART1self)</h3>
				<p class="paragraph">Returns true if the last data received was 
				from UART1, otherwise false.</p>
				<h3>SendResponse(self, strResponse, bClose = true)</h3>
				<p class="paragraph">This function sends your response text to 
				the same serial data source that recieved that last lot of 
				incoming data. The class keeps track of which data source 
				received the last lot of incoming data.</p>
				<h4>Parameters</h4>
				<ul class="paragraph">
					<li><b>strResponse:</b><br/>&nbsp;A string containing the text you wish to send to the client.</li>
					<li><b>bCloseSocket:</b><br/>&nbsp;An optional boolean value specifying whether you want to close the connection after sending your response. 
					If you omitt this parameter then it will have the default 
					value of 'true'. It is only relevent if the response is 
					being sent via Wifi.</li>
				</ul>
				<br/>
				<h3>Dependancies</h3>
				<p class="paragraph">Common.py (included in download)</p>
				<p class="paragraph">WiFi.py (included in download)</p>
				<p class="paragraph">UARTSerial.py (included in download)</p>
				<br/>		
					<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
						<input type="hidden" name="cmd" value="_s-xclick">
						<input type="hidden" name="hosted_button_id" value="AYW5EU86DZE5A">
						<input type="image" src="https://www.paypalobjects.com/en_AU/i/btn/btn_buynowCC_LG.gif" border="0" name="submit" alt="PayPal – The safer, easier way to pay online!">
						<img alt="" border="0" src="https://www.paypalobjects.com/en_AU/i/scr/pixel.gif" width="1" height="1">
					</form>
				<br/>

				<!-- #EndEditable "content" -->
				
			</div><!-- End Content -->
			
			<div id="footer"><!-- Begin Footer -->
			
				
			</div><!-- End Footer -->
			
		</div><!-- End Container -->

	</body>

<!-- #EndTemplate -->

</html>
