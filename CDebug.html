
<head>
</head>

<p class="paragaph"><b><u>Purpose:</u></b></p>

<p class="paragaph" style='text-indent:36.0pt'>To proivde a variety of macros
and functions to allow you to quickly output debug information to Serial
Monitor, with less typing than is involved with <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Serial.print(…) and Serial.println(…)
 statements.</p>

<p class="paragaph">&nbsp;</p>

<p class="paragaph"><b><u>Dependancies:</u></b> </p>

<p class="paragaph" style='text-indent:36.0pt'>Arduino assert.h, stdio.h &amp;
IPAddress.h. Constants.h, CBuff.h/cpp, CString.h/cpp, Common.h/cpp, TextFile.h/cpp
(optional &amp; subject to define at <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; top of debug.h).</p>

<p class="paragaph">&nbsp;</p>

<p class="paragaph"><b><u>Macros:</u></b></p>

<p class="paragaph" style='text-indent:36.0pt'><b>#define RT_ERROR</b></p>

<p class="paragaph" style='margin-left:36.0pt;text-indent:36.0pt'>Prints in
Serial Monitor something like the following:</p>

<p class="paragaph" style='margin-left:72.0pt;text-indent:36.0pt'><i>RUNTIME
ERROR: CString.cpp, line number 109</i></p>

<p class="paragaph">&nbsp;</p>

<p class="paragaph" style='text-indent:36.0pt'><b>#define OPEN_RT_ERROR</b></p>

<p class="paragaph" style='margin-left:36.0pt;text-indent:36.0pt'>Prints in
Serial Monitor the following:</p>

<p class="paragaph" style='margin-left:72.0pt;text-indent:36.0pt'><i>_______________________________________________________</i></p>

<p class="paragaph" style='margin-left:72.0pt;text-indent:36.0pt'><i>RUNTIME
ERROR: CString.cpp, line number 109</i></p>

<p class="paragaph">&nbsp;</p>

<p class="paragaph" style='text-indent:36.0pt'><b>#define CLOSE_RT_ERROR</b></p>

<p class="paragaph" style='margin-left:36.0pt;text-indent:36.0pt'>Prints in
Serial Monitor the following:</p>

<p class="paragaph" style='margin-left:72.0pt;text-indent:36.0pt'><i>_______________________________________________________</i></p>

<p class="paragaph">&nbsp;</p>

<p class="paragaph" style='text-indent:36.0pt'><b>#define DUMP_VAR(VAR)</b></p>

<p class="paragaph" style='margin-left:36.0pt;text-indent:36.0pt'>Given
DUMP_VAR(nMyVariable), it will print something like the following in Serial
Monitor.</p>
<p class="paragaph" style='margin-left:36.0pt;text-indent:36.0pt'><em>nMyVariable =
10</em></p>

<p class="paragaph">&nbsp;</p>

<p class="paragaph"><b><u>Example Usage:</u></b> </p>
<p style='text-indent:36.0pt'>RT_ERROR;</p>
<p style='text-indent:36.0pt'>OPEN_RT_ERROR;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
debug..log(F("More information");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
CLOSE_RT_ERROR;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
uint8_t nVal = 10;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
DUMP_VAR(nVal);</p>
<p class="paragaph"><b><u>Classes:</u></b> </p>

<p class="paragaph" style='text-indent:36.0pt'><b>CDebug</b></p>

<p class="paragaph">&nbsp;</p>

<p class="paragaph">                <b><u>Constructors</u></b></p>

<p class="paragaph" style='margin-left:36.0pt;text-indent:36.0pt'><b>CDebug(Stream
*pSerial = &amp;Serial)</b></p>

<p class="paragaph" style='margin-left:72.0pt;text-indent:36.0pt'>The
Constructor take a pointer to a hardware or software serial object to output
data to. It would normally be Serial (Serial Monitor), but it <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; does not have to
be.</p>

<p class="paragaph" style='margin-left:72.0pt;text-indent:36.0pt'>&nbsp;</p>

<p class="paragaph">                <b><u>Functions</u></b></p>

<p class="paragaph" style='margin-left:36.0pt;text-indent:36.0pt'><b>void
setSerial(Stream *pSerial)</b></p>

<p class="paragaph" style='margin-left:72.0pt;text-indent:36.0pt'>A set function
to change the serial device you are sending debug data to.</p>

<p class="paragaph">&nbsp;</p>

<p class="paragaph" style='margin-left:36.0pt;text-indent:36.0pt'><b>void
setBroadcastSerial(Stream *pSerial)</b></p>

<p class="paragaph" style='margin-left:108.0pt'>The set function lets you set an
optional additional serial device to send debug data to. If set then the class
could output debug data to both Serial Monitor and a 
HC-05 module for when the USB cable is not plugged in.</p>

<p class="paragaph">&nbsp;</p>

<p class="paragaph" style='margin-left:36.0pt;text-indent:36.0pt'><b>bool
startLogFile()</b></p>

<p class="paragaph" style='margin-left:108.0pt'>This function does nothing if
the define LOG_FILE is commented out. Otherwise it opens a file on an SD card
in a reader assumed to be connected to the MCU. It 
allows you to examine debug output generated while the device is unattended.</p>

<p class="paragaph">&nbsp;</p>

<p class="paragaph" style='margin-left:36.0pt;text-indent:36.0pt'><b>bool
openLogFile(CTextFile*&amp; pLogFile)</b></p>

<p class="paragaph" style='margin-left:72.0pt;text-indent:36.0pt'>This function
is not available if the define LOG_FILE is commented out. Otherwsie it opens or
re-opens the log file.</p>

<p class="paragaph">&nbsp;</p>

<p class="paragaph" style='margin-left:36.0pt;text-indent:36.0pt'><b>bool
doneLogFile()</b></p>

<p class="paragaph" style='margin-left:72.0pt;text-indent:36.0pt'>This function
is not available if the define LOG_FILE is commented out. Otherwsie it closes
the log file.</p>

<p class="paragaph">&nbsp;</p>

<p class="paragaph" style='margin-left:72.0pt'><b>void dumpPtr(const
__FlashStringHelper* fstrVarName, const void *pPtr, const bool bNewLine = true)</b></p>

<p class="paragaph" style='margin-left:72.0pt'><b>void dump(const
__FlashStringHelper* fstrVarName, const unsigned long int nVal, const bool
bNewLine = true)</b></p>

<p class="paragaph" style='margin-left:72.0pt'><b>void dump(const
__FlashStringHelper* fstrVarName, const long int nVal, const bool bNewLine =
true)</b></p>

<p class="paragaph" style='margin-left:72.0pt'><b>void dump(const
__FlashStringHelper* fstrVarName, const unsigned int nVal, const bool bNewLine
= true)</b></p>

<p class="paragaph" style='margin-left:72.0pt'><b>void dump(const
__FlashStringHelper* fstrVarName, const int nVal, const bool bNewLine = true)</b></p>

<p class="paragaph" style='margin-left:72.0pt'><b>void dump(const
__FlashStringHelper* fstrVarName, const float fVal, const bool bNewLine = true)</b></p>

<p class="paragaph" style='margin-left:72.0pt'><b>void dump(const
__FlashStringHelper* fstrVarName, const double dVal, const bool bNewLine =
true)</b></p>

<p class="paragaph" style='margin-left:72.0pt'><b>void dump(const
__FlashStringHelper* fstrVarName, const char* cstr, const bool bNewLine = true)</b></p>

<p class="paragaph" style='margin-left:72.0pt'><b>void dump(const
__FlashStringHelper* fstrVarName, const char cChar, const bool bNewLine = true)</b></p>

<p class="paragaph" style='margin-left:72.0pt'><b>void dump(const
__FlashStringHelper* fstrVarName, const bool bVal, const bool bNewLine = true)</b></p>

<p class="paragaph" style='margin-left:72.0pt'><b>void dump(const
__FlashStringHelper* fstrVarName, IPAddress IPAddr, const bool bNewLine = true)</b></p>

<p class="paragaph" style='margin-left:72.0pt'><b>void dump(const
__FlashStringHelper* fstrVarName, const __FlashStringHelper* fstr, const bool
bNewLine = true)</b></p>

<p class="paragaph" style='margin-left:72.0pt'><b>void dump(const
__FlashStringHelper* fstrVarName, CString &amp;str, const bool bNewLine = true)</b></p>

<p class="paragaph" style='margin-left:72.0pt'><b>void dumpPtr(const char*
cstrVarName, const void *pPtr, const bool bNewLine = true)</b></p>

<p class="paragaph" style='margin-left:72.0pt'><b>void dump(const char*
cstrVarName, const __FlashStringHelper* fstr, const bool bNewLine = true)</b></p>

<p class="paragaph" style='margin-left:72.0pt'><b>void dump(const char*
cstrVarName, const char* cstr, const bool bNewLine = true)</b></p>

<p class="paragaph" style='margin-left:72.0pt'><b>void dump(const char*
cstrVarName, const unsigned long int nVal, const bool bNewLine = true)</b></p>

<p class="paragaph" style='margin-left:72.0pt'><b>void dump(const char*
cstrVarName, const long int nVal, const bool bNewLine = true)</b></p>

<p class="paragaph" style='margin-left:72.0pt'><b>void dump(const char*
cstrVarName, const int nVal, const bool bNewLine = true)</b></p>

<p class="paragaph" style='margin-left:72.0pt'><b>void dump(const char*
cstrVarName, const unsigned int nVal, const bool bNewLine = true)</b></p>

<p class="paragaph" style='margin-left:72.0pt'><b>void dump(const char*
cstrVarName, const float fVal, const bool bNewLine = true)</b></p>

<p class="paragaph" style='margin-left:72.0pt'><b>void dump(const char* cstrVarName,
const double dVal, const bool bNewLine = true)</b></p>

<p class="paragaph" style='margin-left:72.0pt'><b>void dump(const char*
cstrVarName, const char cChar, const bool bNewLine = true)</b></p>

<p class="paragaph" style='margin-left:72.0pt'><b>void dump(const char*
cstrVarName, const bool bVal, const bool bNewLine = true)</b></p>

<p class="paragaph" style='margin-left:72.0pt'><b>void dump(const char*
cstrVarName, IPAddress IPAddr, const bool bNewLine = true)</b></p>

<p class="paragaph" style='margin-left:72.0pt'><b>void dump(const char*
cstrVarName, CString &amp;str, const bool bNewLine = true)</b></p>

<p class="paragaph" style='margin-left:108.0pt'>These dump functions output to
Serial Monitor something like the following: COUNT = 11. You can specify
whatever string you want in the parameter cstrVarName
or fstrVarName. The second parameters specifies the variable you want to
output. It the parameter bNewLine contains true then a new line character in
printed, 
and not if it contains false.</p>

<p class="paragaph">&nbsp;</p>

<p class="paragaph" style='margin-left:72.0pt'><b>void logPtr(const void *pPtr,
const bool bNewLine = true)</b></p>

<p class="paragaph" style='margin-left:72.0pt'><b>void log(const unsigned long
int nVal, const bool bNewLine = true)</b></p>

<p class="paragaph" style='margin-left:72.0pt'><b>void log(const long int nVal,
const bool bNewLine = true)</b></p>

<p class="paragaph" style='margin-left:72.0pt'><b>void log(const unsigned int
nVal, const bool bNewLine = true)</b></p>

<p class="paragaph" style='margin-left:72.0pt'><b>void log(const int nVal, const
bool bNewLine = true)</b></p>

<p class="paragaph" style='margin-left:72.0pt'><b>void log(const float fVal,
const bool bNewLine = true)</b></p>

<p class="paragaph" style='margin-left:72.0pt'><b>void log(const double dVal, const
bool bNewLine = true)</b></p>

<p class="paragaph" style='margin-left:72.0pt'><b>void log(const char* cstr,
const bool bNewLine = true)</b></p>

<p class="paragaph" style='margin-left:72.0pt'><b>void log(const
__FlashStringHelper* fstr, const bool bNewLine = true)</b></p>

<p class="paragaph" style='margin-left:72.0pt'><b>void log(const char cChar,
const bool bNewLine = true)</b></p>

<p class="paragaph" style='margin-left:72.0pt'><b>void log(IPAddress IPAddr,
const bool bNewLine = true)</b></p>

<p class="paragaph" style='margin-left:72.0pt;text-indent:36.0pt'>These log
functions simply output to Serial Monitor what ever value is in the parameter.</p>

<p class="paragaph">&nbsp;</p>

<p class="paragaph" style='margin-left:36.0pt;text-indent:36.0pt'><b>void
logEventOpen(const char cCh, const char* cstrEventDesc, const bool bNewLine = 
false)</b></p>

<p class="paragaph" style='margin-left:36.0pt;text-indent:36.0pt'><b>void
logEventOpen(const char cCh, const __FlashStringHelper* fstrEventDesc, const 
bool bNewLine = false)</b></p>

<p class="paragaph" style='margin-left:108.0pt'>Opens an event to be displayed 
in Serial Monitor.<br><strong>cCh:</strong> the
highlight character you want to use.<br><strong>cstrEventDesc or
fstrEventDesc:</strong> specifies the event description. <br><b>bNewLine: </b>
specifies whether or not a new line will be output.<br>It will output
something like the following. After it yo can output what ever other debug
infor you want, before calling logEvenClose(...).</p>

<p class="paragaph" style='margin-left:72.0pt;text-indent:36.0pt'><i>********************************************************</i></p>

<p class="paragaph" style='margin-left:72.0pt;text-indent:36.0pt'><i>EVENT NAME</i></p>

<p class="paragaph" style='margin-left:72.0pt;text-indent:36.0pt'><i>------------------</i></p>

<p class="paragaph">&nbsp;</p>

<p class="paragaph" style='margin-left:72.0pt'><b>void logEventClose(const char
cCh, const char* cstrEventResult)</b></p>

<p class="paragaph" style='margin-left:72.0pt'><b>void logEventClose(const char
cCh, const FlashStringHelper* fstrEventResult)</b></p>

<p class="paragaph" style='margin-left:72.0pt;text-indent:36.0pt'>Closes an 
event to be displayed in Serial Monitor.<br><strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cCh:</strong> the
highlight character you want to use.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b>
cstrEventResult or fstrEventResult: </b>specifies an event result description.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; It will output something like
the following:</p>

<p class="paragaph" style='margin-left:108.0pt'><i>SUCCESSFUL</i></p>

<p class="paragaph" style='margin-left:108.0pt'><i>********************************************************</i></p>

<p class="paragaph">&nbsp;</p>

<p class="paragaph" style='margin-left:72.0pt'><b>void logEvent(const char cCh,
const char* cstrEventDesc)</b></p>

<p class="paragaph" style='margin-left:72.0pt'><b>void logEvent(const char cCh,
const FlashStringHelper* fstrEventDesc)</b></p>

<p class="paragaph" style='margin-left:72.0pt;text-indent:36.0pt'>Opens and 
closes an event in Serial Monitor with the specified event description.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<strong>cCh:</strong>
specifies the highlight character you want to use.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<strong>cstrEventDesc
or fstrEventDesc: </strong>specifies the event description.
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; It will output something like the following:</p>

<p class="paragaph" style='margin-left:108.0pt'><i>********************************************************</i></p>

<p class="paragaph" style='margin-left:108.0pt'><i>EVENT NAME</i></p>

<p class="paragaph" style='margin-left:108.0pt'><i>********************************************************</i></p>

<p class="paragaph">&nbsp;</p>

<p class="paragaph" style='margin-left:36.0pt;text-indent:36.0pt'><b>void
logRuntimeError(const char* cstrFileName, const uint16_t nLineNum)</b></p>

<p class="paragaph" style='margin-left:36.0pt;text-indent:36.0pt'><b>void
logRuntimeError(const __FlashStringHelper* fstrFileName, const int16_t
nLineNum)</b></p>

<p class="paragaph" style='margin-left:72.0pt;text-indent:36.0pt'>Prints in
Serial Monitor something like the following with parameter cstrFileName or fstrFileName
containing the file name and<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; parameter nLineNum contains the line number:</p>

<p class="paragaph" style='margin-left:72.0pt;text-indent:36.0pt'><i>RUNTIME
ERROR: CString.cpp, line number 109</i></p>

<p class="paragaph">&nbsp;</p>

<p class="paragaph" style='margin-left:36.0pt;text-indent:36.0pt'><b>void
openRuntimeError(const char* cstrFileName, const uint16_t nLineNum)</b></p>

<p class="paragaph" style='margin-left:36.0pt;text-indent:36.0pt'><b>void
openRuntimeError(const __FlashStringHelper* fstrFileName, const int16_t nLineNum)&nbsp;</b></p>

<p class="paragaph" style='margin-left:108.0pt'>Prints in Serial Monitor something
like the following with parameter cstrFileName or fstrFileName containing the
file name and parameter nLineNum contains the line number. <br>
It allows you to output any other relevant debug info before closing the event
with closeRuntimeError().</p>

<p class="paragaph" style='margin-left:108.0pt'><i>_______________________________________________________</i></p>

<p class="paragaph" style='margin-left:108.0pt'><i>RUNTIME ERROR: CString.cpp,
line number 109</i></p>

<p class="paragaph">&nbsp;</p>

<p class="paragaph" style='margin-left:36.0pt;text-indent:36.0pt'><b>void
closeRuntimeError()</b></p>

<p class="paragaph" style='margin-left:108.0pt'>Prints in Serial Monitor the
following:</p>

<p class="paragaph" style='margin-left:108.0pt'>_______________________________________________________</p>

<p class="paragaph">&nbsp;</p>

<p class="paragaph" style='margin-left:72.0pt'><b>void logFileFoundError(const
char* cstrFileName)</b></p>

<p class="paragaph" style='margin-left:72.0pt'><b>void
logFileFoundError(__FlashStringHelper* strFileName)</b></p>

<p class="paragaph" style='margin-left:72.0pt;text-indent:36.0pt'>This will
print something like the following in Serial Monitor:</p>

<p class="paragaph" style='margin-left:72.0pt;text-indent:36.0pt'><i>File
'readme.txt' was not found!</i></p>

<p class="paragaph">&nbsp;</p>

<p class="paragaph" style='margin-left:72.0pt'><b>void logFileOpenError(const
char* cstrFileName)</b></p>

<p class="paragaph" style='margin-left:72.0pt'><b>void
logFileOpenError(__FlashStringHelper* strFileName)</b></p>

<p class="paragaph" style='margin-left:72.0pt;text-indent:36.0pt'>This will
print something like the following in Serial Monitor:</p>

<p class="paragaph" style='margin-left:72.0pt;text-indent:36.0pt'><i>File
'readme.txt' could not be opened!</i></p>

<p class="paragaph">&nbsp;</p>

<p class="paragaph" style='margin-left:72.0pt'><b>void logFileReadError(const
char* cstrFileName)</b></p>

<p class="paragaph" style='margin-left:72.0pt'><b>void
logFileReadError(__FlashStringHelper* strFileName)</b></p>

<p class="paragaph" style='margin-left:72.0pt;text-indent:36.0pt'>This will
print something like the following in Serial Monitor:</p>

<p class="paragaph" style='margin-left:72.0pt;text-indent:36.0pt'><i>Error while
reading file 'readme.txt'!</i></p>

<p class="paragaph"><b><u>Example Usage:</u></b> </p>
<p style='text-indent:36.0pt'>debug.logEventOpen('@', F("EVENT NAME"), true);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
debug.log(F("More information"));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
debug.logEvenClose('@', F(""));<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
debug.logEventOpen('@', F("EVENT NAME"), true);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
debug.log(F("More information"));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
debug.logEvenClose('@', F(""));<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
float fVoltage = 5.0;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
debug.dump(F("VOLTAGE", fVoltage);</p>

